# –£–¥–∞–ª–µ–Ω–∏–µ dotenv –∏ dotenv-cli

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- ‚ùå `dotenv: 17.2.1` (dependencies)
- ‚ùå `dotenv-cli: 10.0.0` (devDependencies)

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã:
–í–º–µ—Å—Ç–æ `npx dotenv-cli -e .env.X --` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `export $(grep -v '^#' .env.X | xargs) &&`

**–ë—ã–ª–æ:**
```json
"dev:local": "npx dotenv-cli -e .env.development -- npm run dev",
"start:prod": "npx dotenv-cli -e .env.production -- npm run start"
```

**–°—Ç–∞–ª–æ:**
```json
"dev:local": "export $(grep -v '^#' .env.development | xargs) && npm run dev",
"start:prod": "export $(grep -v '^#' .env.production | xargs) && npm run start"
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ shell-—Å–∫—Ä–∏–ø—Ç—ã:

#### `dev.sh`
- –£–¥–∞–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ `dotenv-cli`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `load_env()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ .env —Ñ–∞–π–ª–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

#### `scripts/*.sh`
- `build-clean.sh` - –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è dotenv-cli
- `dev-start.sh` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env.development –Ω–∞–ø—Ä—è–º—É—é
- `start-clean.sh` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è load_env
- `start-server.sh` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±–µ–∑ dotenv-cli
- `simple-start.sh` - —É–ø—Ä–æ—â–µ–Ω, —É–±—Ä–∞–Ω dotenv-cli

#### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- `test-local.sh` - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—ã–∑–æ–≤—ã dotenv-cli
- `test-shutdown.sh` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ development —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# –°–ø–æ—Å–æ–± 1: —á–µ—Ä–µ–∑ npm —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
npm run dev:local

# –°–ø–æ—Å–æ–± 2: —á–µ—Ä–µ–∑ dev.sh
./dev.sh start development

# –°–ø–æ—Å–æ–± 3: –≤—Ä—É—á–Ω—É—é
export $(grep -v '^#' .env.development | xargs) && npm run dev
```

### –ó–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# –°–ø–æ—Å–æ–± 1: —á–µ—Ä–µ–∑ npm —Å–∫—Ä–∏–ø—Ç
npm run start:prod  # –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env.production

# –°–ø–æ—Å–æ–± 2: —á–µ—Ä–µ–∑ dev.sh
./dev.sh start production

# –°–ø–æ—Å–æ–± 3: –≤—Ä—É—á–Ω—É—é
export $(grep -v '^#' .env.production | xargs) && npm run start
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
# –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π .env.test
npm run test

# –ò–ª–∏ —á–µ—Ä–µ–∑ dev.sh
./dev.sh test
```

### Docker –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
–í Docker –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ docker-compose.yml –∏–ª–∏ Dockerfile,
–ø–æ—ç—Ç–æ–º—É —É–¥–∞–ª–µ–Ω–∏–µ dotenv-cli –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –±–æ–ª–µ–µ Docker-friendly:

```yaml
# docker-compose.yml
environment:
  - NODE_ENV=production
  - PORT=3001
  - PUBLIC_SALEOR_API_URL=https://api.example.com
```

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–±—Ä–∞–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–ª –ª–µ–≥—á–µ –Ω–∞ 2 –ø–∞–∫–µ—Ç–∞
2. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - –∏—Å–ø–æ–ª—å–∑—É–µ–º shell –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é
3. **–ú–µ–Ω—å—à–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π** - –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
4. **Docker-friendly** - env vars —á–µ—Ä–µ–∑ docker-compose —Ä–∞–±–æ—Ç–∞—é—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å CI/CD** - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤ pipeline

## üîß –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–í–æ –≤—Å–µ—Ö shell-—Å–∫—Ä–∏–ø—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:
```bash
load_env() {
    local env_file="$1"
    if [ -f "$env_file" ]; then
        export $(grep -v '^#' "$env_file" | xargs)
        echo "üîß Environment loaded from $env_file"
    else
        echo "‚ö†Ô∏è  Warning: Environment file $env_file not found"
    fi
}
```

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (—Å—Ç—Ä–æ–∫–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å #)
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â—É—é shell —Å–µ—Å—Å–∏—é
- –í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üìù –§–∞–π–ª—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ —Ñ–∞–π–ª—ã:
- `.env.development` - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (PORT=3000)
- `.env.production` - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (PORT=3001) 
- `.env.test` - –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (PORT=3002)
- `.env.example` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### "No matching export in src/gql/index.ts"

**–ü—Ä–æ–±–ª–µ–º–∞:** Vite –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ GraphQL —Ç–∏–ø—ã –≤ src/gql/index.ts

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `PUBLIC_SALEOR_API_URL` –∑–∞–¥–∞–Ω–∞:
   ```bash
   export $(grep -v '^#' .env.development | xargs)
   echo $PUBLIC_SALEOR_API_URL
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é GraphQL —Ç–∏–ø–æ–≤:
   ```bash
   # –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   pnpm install
   pnpm run generate
   ```

3. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª `src/gql/index.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã.

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –§–∞–π–ª `src/gql/index.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `MockGraphQLDocument` –∫–ª–∞—Å—Å —Å —Ä–∞–±–æ—á–∏–º –º–µ—Ç–æ–¥–æ–º `toString()`
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ GraphQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è ProductList
- Placeholder-—ç–∫—Å–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏ –¥–µ–ª–∞—Ç—å API-–≤—ã–∑–æ–≤—ã –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç–æ—è—â–∏—Ö —Ç–∏–ø–æ–≤.

### "PUBLIC_SALEOR_API_URL not set" –≤–æ –≤—Ä–µ–º—è pnpm install

–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö - —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.development` –∏ `.env`.

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
```bash
export $(grep -v '^#' .env.development | xargs)
pnpm install
```

### "Cannot read properties of undefined (reading 'toString')"

**–ü—Ä–æ–±–ª–µ–º–∞:** GraphQL –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –∏–º–µ—é—Ç –º–µ—Ç–æ–¥–∞ toString()

**–†–µ—à–µ–Ω–æ:** –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `MockGraphQLDocument` —Å –º–µ—Ç–æ–¥–æ–º `toString()`. –¢–µ–ø–µ—Ä—å placeholder –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤–µ–¥—É—Ç —Å–µ–±—è –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–µ GraphQL –¥–æ–∫—É–º–µ–Ω—Ç—ã.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è "Using Saleor API" –∏ "Using fallback mock data" –≤–º–µ—Å—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫.

### GraphQL codegen —É—Å–ø–µ—à–µ–Ω, –Ω–æ –≤—Å–µ –µ—â–µ "No matching export"

**–ü—Ä–æ–±–ª–µ–º–∞:** `scripts/generate.sh` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª –Ω–∞—Å—Ç–æ—è—â–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ: `‚úî Generate outputs` (—É—Å–ø–µ—à–Ω–æ)
- –ó–∞—Ç–µ–º: `üîß Fixing GraphQL exports...` 
- –ù–æ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç –¥—É–º–∞–ª, —á—Ç–æ –Ω—É–∂–Ω–æ "–∏—Å–ø—Ä–∞–≤–∏—Ç—å" —ç–∫—Å–ø–æ—Ä—Ç—ã –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª —Ñ–∞–π–ª `src/gql/index.ts` –ø—Ä–æ—Å—Ç—ã–º–∏ `export *` –∑–∞—è–≤–ª–µ–Ω–∏—è–º–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `scripts/generate.sh` - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–∞—Å—Ç–æ—è—â–∏—Ö GraphQL —Ç–∏–ø–æ–≤ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å—é.

```bash
# –¢–µ–ø–µ—Ä—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
if grep -q "export.*Document" src/gql/index.ts; then
    echo "‚úÖ GraphQL codegen created proper types"  # –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º!
else
    # –¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ–º fallback
fi
```
